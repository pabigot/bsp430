<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>BSP430: Alarm-related Timer Functionality</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BSP430
   &#160;<span id="projectnumber">20130110</span>
   </div>
   <div id="projectbrief">Board Support Package for MSP430 microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Alarm-related Timer Functionality</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="timer_8h.html" title="Hardware presentation/abstraction for generic timers (Timer_A/Timer_B)">bsp430/periph/timer.h</a> data structures and functions supporting alarms  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsBSP430timerAlarm.html">sBSP430timerAlarm</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga21bb8801633b35ea742bb88d804e5674"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#ga21bb8801633b35ea742bb88d804e5674">BSP430_TIMER_ALARM_FLAG_SET</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:ga21bb8801633b35ea742bb88d804e5674"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa5de1dec0ca2a7bc98597562a270a4ab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#gaa5de1dec0ca2a7bc98597562a270a4ab">BSP430_TIMER_ALARM_FLAG_ENABLED</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="separator:gaa5de1dec0ca2a7bc98597562a270a4ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga527434bdb0cc9ca930853d7fe42a4c32"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#ga527434bdb0cc9ca930853d7fe42a4c32">BSP430_TIMER_ALARM_PAST_LIMIT</a>&#160;&#160;&#160;65536UL</td></tr>
<tr class="separator:ga527434bdb0cc9ca930853d7fe42a4c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga24c1bdddc80226caa30a56db54a38f3a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#ga24c1bdddc80226caa30a56db54a38f3a">BSP430_TIMER_ALARM_FUTURE_LIMIT</a>&#160;&#160;&#160;5UL</td></tr>
<tr class="separator:ga24c1bdddc80226caa30a56db54a38f3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac953994f53e720e2e09f34d699d54649"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#gac953994f53e720e2e09f34d699d54649">BSP430_TIMER_ALARM_SET_NOW</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:gac953994f53e720e2e09f34d699d54649"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafcfa39b36bcff291c2a2bb1e02e8d9ad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#gafcfa39b36bcff291c2a2bb1e02e8d9ad">BSP430_TIMER_ALARM_SET_PAST</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:gafcfa39b36bcff291c2a2bb1e02e8d9ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58a61d83b21c4613db1e77f5c771b749"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#ga58a61d83b21c4613db1e77f5c771b749">BSP430_TIMER_ALARM_SET_ALREADY</a>&#160;&#160;&#160;-2</td></tr>
<tr class="separator:ga58a61d83b21c4613db1e77f5c771b749"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaddc59374b0dce2695bf42e8d12501a7f"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsBSP430timerAlarm.html">sBSP430timerAlarm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a></td></tr>
<tr class="separator:gaddc59374b0dce2695bf42e8d12501a7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9995237b87fbe59fcb5b31806f91b4ca"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#ga9995237b87fbe59fcb5b31806f91b4ca">iBSP430timerAlarmCallback_ni</a> )(<a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a> alarm)</td></tr>
<tr class="separator:ga9995237b87fbe59fcb5b31806f91b4ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga683a7d272e6c6e48fe3ed1752dbafd81"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#ga683a7d272e6c6e48fe3ed1752dbafd81">hBSP430timerAlarmInitialize</a> (struct <a class="el" href="structsBSP430timerAlarm.html">sBSP430timerAlarm</a> *alarm, <a class="el" href="periph_8h.html#a6a1c6c4a24d03d6306bf32f8dbde05a9">tBSP430periphHandle</a> periph, int ccidx, <a class="el" href="group__grp__timer__alarm.html#ga9995237b87fbe59fcb5b31806f91b4ca">iBSP430timerAlarmCallback_ni</a> callback)</td></tr>
<tr class="separator:ga683a7d272e6c6e48fe3ed1752dbafd81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf78fc60de828bc03bb7c93624f384ef1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#gaf78fc60de828bc03bb7c93624f384ef1">iBSP430timerAlarmSetEnabled_ni</a> (<a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a> alarm, int enablep)</td></tr>
<tr class="separator:gaf78fc60de828bc03bb7c93624f384ef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga10216d360cb1c02108e0347b628854d7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#ga10216d360cb1c02108e0347b628854d7">iBSP430timerAlarmEnable</a> (<a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a> alarm)</td></tr>
<tr class="separator:ga10216d360cb1c02108e0347b628854d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9928ff05ac8f8067c2fc8e4a0b3be331"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#ga9928ff05ac8f8067c2fc8e4a0b3be331">iBSP430timerAlarmDisable</a> (<a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a> alarm)</td></tr>
<tr class="separator:ga9928ff05ac8f8067c2fc8e4a0b3be331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga691c60553180266436fbea9a9a8bfed7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#ga691c60553180266436fbea9a9a8bfed7">iBSP430timerAlarmSet_ni</a> (<a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a> alarm, unsigned long setting_tck)</td></tr>
<tr class="separator:ga691c60553180266436fbea9a9a8bfed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5a20e3f41fc5389746951c0a106d9d91"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#ga5a20e3f41fc5389746951c0a106d9d91">iBSP430timerAlarmSet</a> (<a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a> alarm, unsigned long setting_tck)</td></tr>
<tr class="separator:ga5a20e3f41fc5389746951c0a106d9d91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga916a200cdb0920d14d47e3763ed3388c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#ga916a200cdb0920d14d47e3763ed3388c">iBSP430timerAlarmCancel_ni</a> (<a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a> alarm)</td></tr>
<tr class="separator:ga916a200cdb0920d14d47e3763ed3388c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf589e583bd6eca730a5e30f71803da52"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__grp__timer__alarm.html#gaf589e583bd6eca730a5e30f71803da52">iBSP430timerAlarmCancel</a> (<a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a> alarm)</td></tr>
<tr class="separator:gaf589e583bd6eca730a5e30f71803da52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><a class="el" href="timer_8h.html" title="Hardware presentation/abstraction for generic timers (Timer_A/Timer_B)">bsp430/periph/timer.h</a> data structures and functions supporting alarms </p>
<p>BSP430 provides an infrastructure that uses the capture/compare interrupt callbacks of the timer peripheral to support a configurable alarm system.</p>
<p>Each alarm is configured at initialization to reference a specific capture/compare register within a specific timer peripheral. The HAL infrastructure for that peripheral must also have been requested. The number of capture/compare registers supported by a particular peripheral may be obtained at runtime using <a class="el" href="timer_8h.html#ae2e001792494a2b2f060db5e5a5b5f32">iBSP430timerSupportedCCs()</a>. If capture/compare register zero is to be used for alarms, the corresponding CC0 ISR infrastructure must also be enabled. The table below indicates the options that should be enabled for various timers:</p>
<table class="doxtable">
<tr>
<th align="left">Underlying Timer </th><th align="left">HAL Request </th><th align="left">CC0 ISR Request</th></tr>
<tr>
<td align="left"><a class="el" href="timer_8h.html#a34075fc8b8835a19127605e153a41478">BSP430_PERIPH_TA3</a> </td><td align="left"><a class="el" href="group__grp__config__core.html#gac0297e9387752c2ca7877fe482df2806">configBSP430_HAL_TA3</a> </td><td align="left"><a class="el" href="group__grp__config__core.html#ga351ead2eb55696db432fd6bc1621b513">configBSP430_HAL_TA3_CC0_ISR</a> </td></tr>
<tr>
<td align="left"><a class="el" href="uptime_8h.html#a6d4b3ca225b4057be8a5c6f05de6eb7e">BSP430_UPTIME_TIMER_PERIPH_HANDLE</a> </td><td align="left"><em>automatic</em> </td><td align="left"><a class="el" href="group__grp__config__functional.html#gaa14b0b52fb6f36c07294924bea45b36a">configBSP430_UPTIME_TIMER_HAL_CC0_ISR</a> </td></tr>
<tr>
<td align="left"><a class="el" href="group__grp__timer__ccaclk.html#gaaf21a38de49b7d31cba4066c0ce80720">BSP430_TIMER_CCACLK_PERIPH_HANDLE</a> </td><td align="left"><a class="el" href="group__grp__config__functional.html#ga954232351119aa8475038652f880f46d">configBSP430_TIMER_CCACLK_HAL</a> </td><td align="left"><a class="el" href="group__grp__config__functional.html#ga6d3d4b4ec6998ad676bbe635d6a157b3">configBSP430_TIMER_CCACLK_HAL_CC0_ISR</a> </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>It is the responsibility of the application to configure the underlying timer to continuous mode with the appropriate clock source, any desired dividers, and enabling the interrupt that maintains the 32-bit overflow counter timer HAL infrastructure. If you are using <a class="el" href="uptime_8h.html#a6d4b3ca225b4057be8a5c6f05de6eb7e">BSP430_UPTIME_TIMER_PERIPH_HANDLE</a> the timer is already configured this way. For other timers, use something like: <div class="fragment"><div class="line">alarmHAL_ = <a class="code" href="timer_8h.html#afe3886cec73bfe10e638855dac7964dc">hBSP430timerLookup</a>(ALARM_TIMER_PERIPH_HANDLE);</div>
<div class="line"><span class="keywordflow">if</span> (alarmHAL_) {</div>
<div class="line">  alarmHAL_-&gt;<a class="code" href="structsBSP430halTIMER.html#a7fb689ae502f0155fa847d2f8550d716">hpl</a>-&gt;<a class="code" href="structsBSP430hplTIMER.html#af7e38ca9803b3645a8abb261608a7957">ctl</a> = 0;</div>
<div class="line">  <a class="code" href="timer_8h.html#adbda3deda56fd4453c32f47f51c3f861">vBSP430timerResetCounter_ni</a>(alarmHAL_);</div>
<div class="line">  alarmHAL_-&gt;<a class="code" href="structsBSP430halTIMER.html#a7fb689ae502f0155fa847d2f8550d716">hpl</a>-&gt;<a class="code" href="structsBSP430hplTIMER.html#af7e38ca9803b3645a8abb261608a7957">ctl</a> = APP_TASSEL | <a class="code" href="msp430_8h.html#ad367be228fa82c3f35290c9141138710">MC_2</a> | TACLR | TAIE;</div>
<div class="line">}</div>
</div><!-- fragment --></dd></dl>
<p>Alarms depend on a persistent object that describes their current state and holds the callback structures necessary to connect them to the peripheral interrupt infrastructure. These objects must be initialized once using <a class="el" href="group__grp__timer__alarm.html#ga683a7d272e6c6e48fe3ed1752dbafd81">hBSP430timerAlarmInitialize()</a>. After that point, the objects are not directly referenced; operations on the alarm are performed using a <a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">handle</a>.</p>
<p>Alarms are <a class="el" href="group__grp__timer__alarm.html#ga10216d360cb1c02108e0347b628854d7">enabled</a> and <a class="el" href="group__grp__timer__alarm.html#ga9928ff05ac8f8067c2fc8e4a0b3be331">disabled</a> as needed. The act of enabling an alarm links its callbacks into the timer interrupt system. Because these callbacks introduce overhead even when the alarm is not set, alarms should only be enabled when they are likely to be used.</p>
<p>Alarms are set with <a class="el" href="group__grp__timer__alarm.html#ga5a20e3f41fc5389746951c0a106d9d91">iBSP430timerAlarmSet()</a> using the absolute time of the underlying 32-bit timer, which can be obtained through <a class="el" href="timer_8h.html#a73cf4f30824d57dead07b2aa52614b2f">ulBSP430timerCounter()</a>. Because timers run asynchronously to the code, even when interrupts are disabled, the set function return value should be examined to ensure that the alarm was, in fact, set. Alarms may not be set if the duration is too short to reliably implement them, or if the time specified appears to be in the past. The infrastructure detects times that are past the 16-bit overflow of the underlying timer and uses the overflow interrupt to enable the capture/compare register interrupt in the correct cycle.</p>
<p>Alarms that are set may be reliably cancelled using <a class="el" href="group__grp__timer__alarm.html#ga916a200cdb0920d14d47e3763ed3388c">iBSP430timerAlarmCancel_ni()</a>. This should always be done with interrupts disabled, to ensure that the alarm is not firing while the cancellation occurs. The return value will indicate if the alarm cancellation failed, e.g. due to it having already gone off.</p>
<p>When the alarm fires, the callback registered in <a class="el" href="structsBSP430timerAlarm.html#afca4ba6a409f01eef0e2000668ee9b48">sBSP430timerAlarm::callback</a> is invoked. The callback may invoke <a class="el" href="group__grp__timer__alarm.html#ga691c60553180266436fbea9a9a8bfed7">iBSP430timerAlarmSet_ni()</a> to reschedule a periodic alarm, but complex processing should not be done. The callback should instead set a volatile global variable and return a value such as <a class="el" href="periph_8h.html#a54d508be960943682bb59a2d4e7225da">BSP430_HAL_ISR_CALLBACK_EXIT_LPM</a>. See <a class="el" href="group__grp__timer__alarm.html#ga9995237b87fbe59fcb5b31806f91b4ca">iBSP430timerAlarmCallback_ni</a>.</p>
<p>The <a class="el" href="ex_utility_alarm.html">Utilities: Alarms</a> example program provides an environment where the behavior of alarms can be interactively probed.</p>
<dl class="section warning"><dt>Warning</dt><dd>The alarm infrastructure requires that <a class="el" href="timer_8h.html#a3ea58cea215db6dd462e3513ca56ad9f">vBSP430timerSafeCounterInitialize_ni()</a> have been invoked on the underlying timer. This is done by the infrastructure for <a class="el" href="uptime_8h.html#a6d4b3ca225b4057be8a5c6f05de6eb7e">BSP430_UPTIME_TIMER_PERIPH_HANDLE</a>, but you must do so for other timers that may be used for alarms.</dd></dl>
<dl class="section user"><dt>Homepage</dt><dd><a href="http://github.com/pabigot/bsp430">http://github.com/pabigot/bsp430</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2012-2013, Peter A. Bigot. Licensed under <a href="http://www.opensource.org/licenses/BSD-3-Clause">BSD-3-Clause</a> </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gaa5de1dec0ca2a7bc98597562a270a4ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_TIMER_ALARM_FLAG_ENABLED&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Bit set in <a class="el" href="structsBSP430timerAlarm.html#ab2ac4d51eccde7bff81031a9bf4cf8b1">sBSP430timerAlarm::flags</a> if the alarm is enabled. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="utility_2alarm_2main_8c-example.html#a23">utility/alarm/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga21bb8801633b35ea742bb88d804e5674"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_TIMER_ALARM_FLAG_SET&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Bit set in <a class="el" href="structsBSP430timerAlarm.html#ab2ac4d51eccde7bff81031a9bf4cf8b1">sBSP430timerAlarm::flags</a> if the alarm is currently set. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="utility_2alarm_2main_8c-example.html#a22">utility/alarm/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga24c1bdddc80226caa30a56db54a38f3a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_TIMER_ALARM_FUTURE_LIMIT&#160;&#160;&#160;5UL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Time limit for future alarms.</p>
<p>If the requested time is less than this many ticks in the future, <a class="el" href="group__grp__timer__alarm.html#ga691c60553180266436fbea9a9a8bfed7">iBSP430timerAlarmSet_ni()</a> will not schedule the alarm and will returned <a class="el" href="group__grp__timer__alarm.html#gac953994f53e720e2e09f34d699d54649">BSP430_TIMER_ALARM_SET_NOW</a>. This more than this limit in the future will be scheduled.</p>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>

</div>
</div>
<a class="anchor" id="ga527434bdb0cc9ca930853d7fe42a4c32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_TIMER_ALARM_PAST_LIMIT&#160;&#160;&#160;65536UL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Time limit for past alarms.</p>
<p>If the requested time is less than this many ticks in the past, <a class="el" href="group__grp__timer__alarm.html#ga691c60553180266436fbea9a9a8bfed7">iBSP430timerAlarmSet_ni()</a> will not schedule the alarm and will return <a class="el" href="group__grp__timer__alarm.html#gafcfa39b36bcff291c2a2bb1e02e8d9ad">BSP430_TIMER_ALARM_SET_PAST</a>. Times more than this number of ticks in the past are assumed to be valid future times that were subject to 32-bit overflow.</p>
<dl class="section user"><dt>Defaulted:</dt><dd>The value here is superseded by previously encountered definitions. </dd></dl>

</div>
</div>
<a class="anchor" id="ga58a61d83b21c4613db1e77f5c771b749"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_TIMER_ALARM_SET_ALREADY&#160;&#160;&#160;-2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Value returned by <a class="el" href="group__grp__timer__alarm.html#ga691c60553180266436fbea9a9a8bfed7">iBSP430timerAlarmSet_ni()</a> when the alarm was already scheduled. </p>

</div>
</div>
<a class="anchor" id="gac953994f53e720e2e09f34d699d54649"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_TIMER_ALARM_SET_NOW&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Value returned by <a class="el" href="group__grp__timer__alarm.html#ga691c60553180266436fbea9a9a8bfed7">iBSP430timerAlarmSet_ni()</a> when the requested time is too near for the scheduling to be reliable. See <a class="el" href="group__grp__timer__alarm.html#ga24c1bdddc80226caa30a56db54a38f3a">BSP430_TIMER_ALARM_FUTURE_LIMIT</a>. </p>

</div>
</div>
<a class="anchor" id="gafcfa39b36bcff291c2a2bb1e02e8d9ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BSP430_TIMER_ALARM_SET_PAST&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Value returned by <a class="el" href="group__grp__timer__alarm.html#ga691c60553180266436fbea9a9a8bfed7">iBSP430timerAlarmSet_ni()</a> when the requested time appears to have recently passed. See <a class="el" href="group__grp__timer__alarm.html#ga527434bdb0cc9ca930853d7fe42a4c32">BSP430_TIMER_ALARM_PAST_LIMIT</a>. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gaddc59374b0dce2695bf42e8d12501a7f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsBSP430timerAlarm.html">sBSP430timerAlarm</a>* <a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A handle to an alarm structure.</p>
<dl class="section note"><dt>Note</dt><dd>The reference is to a <code>const</code> <a class="el" href="structsBSP430timerAlarm.html">sBSP430timerAlarm</a> because user code should never manipulate the alarm configuration directly. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9995237b87fbe59fcb5b31806f91b4ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(*  iBSP430timerAlarmCallback_ni)(<a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a> alarm)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback for alarm events.</p>
<p>This function will be invoked by the timer infrastructure in an interrupt context when the alarm goes off. The implementation is permitted to invoke <a class="el" href="group__grp__timer__alarm.html#ga691c60553180266436fbea9a9a8bfed7">iBSP430timerAlarmSet_ni()</a> to schedule a new alarm. If this is not done, the alarm will automatically be disabled when the callback returns.</p>
<dl class="section note"><dt>Note</dt><dd>Because <code>cfg</code> is a pointer to the underlying <a class="el" href="structsBSP430timerAlarm.html">sBSP430timerAlarm</a> structure, the techniques of <a class="el" href="callbacks.html#callback_appinfo">Providing Extended Information to the Callback</a> may be used to provide additional parameters for use by the callback function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cfg</td><td>The structure describing the alarm configuration.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>As with <a class="el" href="periph_8h.html#ada4e594aec086cfbae21e574ae28c452">iBSP430halISRCallbackVoid()</a>. </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga683a7d272e6c6e48fe3ed1752dbafd81"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a> hBSP430timerAlarmInitialize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsBSP430timerAlarm.html">sBSP430timerAlarm</a> *&#160;</td>
          <td class="paramname"><em>alarm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="periph_8h.html#a6a1c6c4a24d03d6306bf32f8dbde05a9">tBSP430periphHandle</a>&#160;</td>
          <td class="paramname"><em>periph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ccidx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__grp__timer__alarm.html#ga9995237b87fbe59fcb5b31806f91b4ca">iBSP430timerAlarmCallback_ni</a>&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize an alarm structure.</p>
<p>This routine configures the <code>alarm</code> structure so it is prepared to operate using capture/compare register <code>ccidx</code> of the timer peripheral identified by <code>periph</code>. This involves setting various fields inside the <code>alarm</code> structure; those settings should never be manipulated by user code.</p>
<p>Note that this simply initializes the structure; it does not set any alarms, nor does it enable the alarm.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alarm</td><td>a pointer to the structure holding alarm configuration data.</td></tr>
    <tr><td class="paramname">periph</td><td>the handle identifier, such as <a class="el" href="uptime_8h.html#a6d4b3ca225b4057be8a5c6f05de6eb7e">BSP430_UPTIME_TIMER_PERIPH_HANDLE</a>.</td></tr>
    <tr><td class="paramname">ccidx</td><td>the capture/compare index within the timer. It is the user's responsibility to ensure that the selected timer supports the selected capture/compare register.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>If <a class="el" href="timer_8h.html#aabc91e75098e4ea4d9bc3384dc8d7ff4">configBSP430_TIMER_SAFE_COUNTER_READ</a> is enabled (as it is by default), attempts to configure an alarm on <a class="el" href="timer_8h.html#aad30dd3941041dfa851bffbfe82ad780">BSP430_TIMER_SAFE_COUNTER_READ_CCIDX</a> will be rejected.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>the callback function to be invoked when the alarm goes off. This may be a null pointer, in which case the infrastructure will behave as though a registered callback did nothing but return <a class="el" href="periph_8h.html#a54d508be960943682bb59a2d4e7225da">BSP430_HAL_ISR_CALLBACK_EXIT_LPM</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A non-null handle for the alarm. A null handle will be returned if initialization failed, e.g. because <code>periph</code> could not be identified as a timer with a HAL supporting an alarm. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="utility_2alarm_2main_8c-example.html#a48">utility/alarm/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="gaf589e583bd6eca730a5e30f71803da52"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> int iBSP430timerAlarmCancel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a>&#160;</td>
          <td class="paramname"><em>alarm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Wrapper to invoke <a class="el" href="group__grp__timer__alarm.html#ga916a200cdb0920d14d47e3763ed3388c">iBSP430timerAlarmCancel_ni()</a> when interrupts are enabled. </p>

</div>
</div>
<a class="anchor" id="ga916a200cdb0920d14d47e3763ed3388c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430timerAlarmCancel_ni </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a>&#160;</td>
          <td class="paramname"><em>alarm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cancel a scheduled alarm event.</p>
<p>This disconnects the scheduled alarm and inhibits any pending alarm from being executed. It may be executed from user code or from within an alarm callback or other interrupt handler.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alarm</td><td>a pointer to an alarm structure initialized using iBSP430timerAlarmInitialize().</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero if the alarm was disabled. A negative value indicates an error, such as that the alarm was not set when this was called. This may indicate that the alarm had already fired. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="utility_2alarm_2main_8c-example.html#a12">utility/alarm/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga9928ff05ac8f8067c2fc8e4a0b3be331"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> int iBSP430timerAlarmDisable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a>&#160;</td>
          <td class="paramname"><em>alarm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Disable an enabled alarm.</p>
<p>A wrapper around <a class="el" href="group__grp__timer__alarm.html#gaf78fc60de828bc03bb7c93624f384ef1">iBSP430timerAlarmSetEnabled_ni()</a> suitable for use when interrupts are enabled.</p>
<p>This removes the alarm's callbacks from the timer infrastructure. Any scheduled alarm will be canceled prior to disabling it. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="utility_2alarm_2main_8c-example.html#a21">utility/alarm/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga10216d360cb1c02108e0347b628854d7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> int iBSP430timerAlarmEnable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a>&#160;</td>
          <td class="paramname"><em>alarm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Enable an initialized alarm.</p>
<p>A wrapper around <a class="el" href="group__grp__timer__alarm.html#gaf78fc60de828bc03bb7c93624f384ef1">iBSP430timerAlarmSetEnabled_ni()</a> suitable for use when interrupts are enabled.</p>
<p>This hooks the alarm's callbacks into the timer infrastructure. It does not set the alarm. Alarms must be enabled before they can be set, and initialized before they can be enabled. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="utility_2alarm_2main_8c-example.html#a20">utility/alarm/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga5a20e3f41fc5389746951c0a106d9d91"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="core_8h.html#acc9bdec15b3ab4175315a6e0f6b6d142">BSP430_CORE_INLINE</a> int iBSP430timerAlarmSet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a>&#160;</td>
          <td class="paramname"><em>alarm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>setting_tck</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Wrapper to invoke <a class="el" href="group__grp__timer__alarm.html#ga691c60553180266436fbea9a9a8bfed7">iBSP430timerAlarmSet_ni()</a> when interrupts are enabled. </p>

</div>
</div>
<a class="anchor" id="ga691c60553180266436fbea9a9a8bfed7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430timerAlarmSet_ni </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a>&#160;</td>
          <td class="paramname"><em>alarm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>setting_tck</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the alarm to go off at the specified time.</p>
<p>This function may be invoked in normal user code, or within an alarm callback or other interrupt handler to reschedule the alarm.</p>
<dl class="section warning"><dt>Warning</dt><dd>The default value for BSP430_TIMER_ALARM_PAST_LIMIT assumes the interrupt will be processed within a single overflow of the underlying 16-bit timer peripheral. When a busy system uses very high-speed timers, e.g. an undivided <code>SMCLK</code>, application code should take into account that the <a class="el" href="structsBSP430timerAlarm.html#aa42f23d79c51dc804e7e00a940b27277">sBSP430timerAlarm::setting_tck</a> value may be so far in the past that new settings are mis-interpreted as being in the far future.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alarm</td><td>a pointer to an alarm structure initialized using iBSP430timerAlarmInitialize().</td></tr>
    <tr><td class="paramname">setting_tck</td><td>the time at which the alarm should go off.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>Zero to indicate the alarm was successfully scheduled; </li>
<li>The positive value <a class="el" href="group__grp__timer__alarm.html#gac953994f53e720e2e09f34d699d54649">BSP430_TIMER_ALARM_SET_NOW</a> if <code>setting_tck</code> is too near for the alarm infrastructure to guarantee delivery of the alarm event; </li>
<li>The positive value <a class="el" href="group__grp__timer__alarm.html#gafcfa39b36bcff291c2a2bb1e02e8d9ad">BSP430_TIMER_ALARM_SET_PAST</a> if <code>setting_tck</code> appears to be in the recent past; </li>
<li>The negative value <a class="el" href="group__grp__timer__alarm.html#ga58a61d83b21c4613db1e77f5c771b749">BSP430_TIMER_ALARM_SET_ALREADY</a> if the alarm was already scheduled; </li>
<li>other negative values indicating specific or generic errors. </li>
</ul>
</dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="utility_2alarm_2main_8c-example.html#a5">utility/alarm/main.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="gaf78fc60de828bc03bb7c93624f384ef1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int iBSP430timerAlarmSetEnabled_ni </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__grp__timer__alarm.html#gaddc59374b0dce2695bf42e8d12501a7f">hBSP430timerAlarm</a>&#160;</td>
          <td class="paramname"><em>alarm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>enablep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable or disable an alarm.</p>
<p>The effect of this is to hook the alarm into the necessary interrupt callbacks. Enabling the alarm does not cause it to be set; disabling does cause a set alarm to be cancelled.</p>
<p>During the times an alarm is enabled its callbacks are linked into the relevant interrupt callback chains. This can introduce overhead, so alarms should be explicitly disabled during periods when they are not active.</p>
<dl class="section warning"><dt>Warning</dt><dd>Do not enable or disable alarms from inside interrupt handlers or alarm callbacks.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alarm</td><td>the alarm that is being configured</td></tr>
    <tr><td class="paramname">enablep</td><td>nonzero if the alarm is to be enabled; zero if it is to be disabled.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if setting was successful; -1 if an error occurs. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jan 10 2013 15:09:12 for BSP430 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
