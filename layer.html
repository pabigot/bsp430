<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>BSP430: Abstraction Layers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BSP430
   &#160;<span id="projectnumber">20130427</span>
   </div>
   <div id="projectbrief">Board Support Package for MSP430 microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Abstraction Layers </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#layer_periph">Peripheral Handles</a></li>
<li class="level1"><a href="#layer_hpl">Hardware Presentation Layer (HPL)</a></li>
<li class="level1"><a href="#layer_hal">Hardware Abstraction Layer (HAL)</a></li>
<li class="level1"><a href="#layer_func">Functional Abstraction Layers</a></li>
</ul>
</div>
<div class="textblock"><p>BSP430 provides several layers of abstraction allowing reference to and manipulation of peripherals generically, at the hardware register level, and based on peripheral and generic function.</p>
<h1><a class="anchor" id="layer_periph"></a>
Peripheral Handles</h1>
<p>Peripheral handles are integral values that uniquely identify a single peripheral or core capability within a target microcontroller. Where it is necessary to refer to a generic peripheral in BSP430, a peripheral handle is used.</p>
<p>For clarity, the type <a class="el" href="periph_8h.html#a6a1c6c4a24d03d6306bf32f8dbde05a9">tBSP430periphHandle</a> is used to denote these references. Handles are defined for instances of peripheral modules, such as <a class="el" href="port_8h.html#afa71d42b869eb19c18aa4a6b11de5a04">BSP430_PERIPH_PORT1</a>, as well as for capabilities like <a class="el" href="periph_8h.html#a8fdd7291ef0be5835eca07b9d4707f65">BSP430_PERIPH_EXPOSED_CLOCKS</a> which must be configured in a similar manner.</p>
<p>A more detailed description of peripheral handles is in &lt;<a class="el" href="periph_8h.html" title="Generic peripheral support for MSP430 MCUs.">bsp430/periph.h</a>&gt;.</p>
<p><a class="anchor" id="HPL"></a></p>
<h1><a class="anchor" id="layer_hpl"></a>
Hardware Presentation Layer (HPL)</h1>
<p>The hardware presentation layer, frequently abbreviated as HPL in BSP430 documentation and interface, is a minimal abstraction of the underlying peripheral registers, in the form of a C structure defining the layout of registers that control a peripheral.</p>
<p>A hardware presentation layer is defined only for peripherals that normally have multiple instances within a single MCU, such as <a class="el" href="timer_8h.html">timers</a> and <a class="el" href="port_8h.html">ports</a>. Peripherals such as clocks that normally exist in only one instance per MCU are not abstracted into an HPL.</p>
<p>The primary purpose of the HPL is to allow code to be written that is decoupled from the specific peripheral instance (e.g., PORT1 or PORT2). No attempt is made to provide functions that do what is normally done by setting and clearing bits in peripheral registers. An application that intends to use a peripheral instance through its HPL must enable it through the <a class="el" href="bsp430_config.html">configuration interface</a> (e.g., <a class="el" href="group__grp__config__core.html#gae2fc54db8e042a1a968b60deddfe065c">configBSP430_HPL_PORT1</a>). The application may then reference the HPL through a constant expression such as <a class="el" href="port_8h.html#a393e897b2b3eeb5ec688e2ac7c490573">BSP430_HPL_PORT1</a>. HPL references are normally pointers to volatile structures. The structure tags correspond to the standard register names, excluding any prefix that identifies a specific peripheral instance. For example, the register <code>P1IFG</code> may be accessed as <code>BSP430_HPL_PORT1-&gt;ifg</code>.</p>
<p><a class="anchor" id="HAL"></a></p>
<h1><a class="anchor" id="layer_hal"></a>
Hardware Abstraction Layer (HAL)</h1>
<p>Where complete control and interaction with a peripheral cannot be accomplished solely through a pointer to its registers, a hardware abstraction layer is defined. A HAL reference is a pointer to a structure which contains identification data, the underlying HPL reference, and in many cases information supporting use of peripheral interrupts. Existing HAL interfaces include:</p>
<ul>
<li>the <a class="el" href="port_8h.html">Digital I/O Port</a> HAL which allows generic access to digital I/O port capabilities, adding pin-specific callback configuration and a shared interrupt infrastructure;</li>
</ul>
<ul>
<li>the <a class="el" href="timer_8h.html">Timer</a> HAL which provides a shared interrupt structure adding callback support for counter overflow and capture/compare blocks;</li>
</ul>
<ul>
<li>the <a class="el" href="serial_8h.html">serial communications</a> HAL which provides functions supporting UART, SPI, and I2C protocols over (currently) three distinct peripheral implementations, also with interrupt management.</li>
</ul>
<p>The primary purpose of the HAL interface is to decouple code that requires interrupt capabilities from the interrupt handler, allowing independent modules to share a handler implementation without requiring modification of the handler itself if it is necessary to move functionality between pins or peripheral instances.</p>
<h1><a class="anchor" id="layer_func"></a>
Functional Abstraction Layers</h1>
<p>BSP430 also provides interfaces that are independent of the underlying peripheral implementation, and that provide core functionality that is useful in generic MSP430 applications. Existing functional interfaces include:</p>
<ul>
<li>the <a class="el" href="serial_8h.html">serial abstraction</a> supports UART, SPI, and I2C communications channels;</li>
</ul>
<ul>
<li>the <a class="el" href="clock_8h.html">clock abstraction</a> provides a common interface for configuring the various clocks, configuring a low-frequency crystal, checking for clock stability, etc. The functions are standard, though each MSP430 family has at least one underlying clock peripheral that supports them, and they have different capabilities;</li>
</ul>
<ul>
<li>the <a class="el" href="led_8h.html">LED</a> interface;</li>
</ul>
<ul>
<li>the <a class="el" href="console_8h.html">console</a> supporting bi-directional serial communications over a platform-identified UART at a nominal standard 9600 baud rate;</li>
</ul>
<ul>
<li>the <a class="el" href="uptime_8h.html">uptime</a> abstraction that maintains a continous ACLK-based timer including overflow counter support to determine system uptime and time-of-event measurement.</li>
</ul>
<ul>
<li>the <a class="el" href="onewire_8h.html">1-Wire</a> interface</li>
</ul>
<p>Copyright 2012-2013, Peter A. Bigot </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Apr 27 2013 18:46:23 for BSP430 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
